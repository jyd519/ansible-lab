- name: multiple file copying methods
  hosts: all 
  tasks:
    - name: Check if '-limit/-l' argument is provided
      fail:
        msg: "you must provides the -limit/-l argument to run this playbook"
      when: ansible_limit is not defined

    - name: "Ansible | List all known variables and facts"
      debug:
        var: hostvars[inventory_hostname]
      when:
        - ('allvars' in ansible_run_tags)

    - name: "Ansible | Specail Variables"
      debug:
        msg:
          - ansible_os_family = {{ansible_os_family}} 
          - ansible_distribution = {{ansible_distribution}} 
          - ansible_distribution_release = {{ansible_distribution_release}} 
          - ansible_system= {{ansible_system}} 
          - ansible_run_tags = {{ansible_run_tags}}
          - ansible_skip_tags = {{ansible_skip_tags}}
          - aplaybook_dir = {{playbook_dir}}
          - ansible_host = {{ansible_host}}
          - inventory_hostname = {{inventory_hostname}}
          - ansible_limit = {{ansible_limit}}
          - ansible_user = {{ansible_user}}
      tags: [var]

    # - name: Copy all yaml files
    #   copy:
    #     src: "{{ item }}"
    #     dest: "~/ansiblelab/"  # 结尾的/确保文件复制到目录中
    #   with_fileglob:
    #     - "*.yml"

    # - synchronize:
    #     src: ./roles
    #     dest: "~/ansiblelab2/"
    #     rsync_opts:
    #       - '--exclude=.git'

    # - name: Enable configuration
    #   file: >
    #     dest=/etc/nginx/sites-enabled/default
    #     src=/etc/nginx/sites-available/default
    #     state=link
    
    # - name: Copy index.html
    #   template: >
    #     src=index.html.j2
    #     dest=/usr/share/nginx/html/index.html
    
# vim:set et sw=2 ts=2 ft=yaml.ansible:     
